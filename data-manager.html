<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lodge Data Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c5f4f;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        button {
            background: #2c5f4f;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }

        button:hover {
            background: #1f4538;
        }

        .danger {
            background: #e74c3c;
        }

        .danger:hover {
            background: #c0392b;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
        }

        .info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .success {
            background: #d4edda;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
            display: none;
        }

        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .count {
            font-weight: bold;
            color: #2c5f4f;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üèîÔ∏è Lodge Data Manager</h1>
        <p class="subtitle">Backup, restore, or view your lodge data</p>

        <div class="info">
            <strong>Current Status:</strong><br>
            Total Lodges: <span class="count" id="lodgeCount">0</span><br>
            Total Bookmarks: <span class="count" id="bookmarkCount">0</span>
        </div>

        <div class="section">
            <h2>üì• Export Current Data</h2>
            <p>Download your current lodges and bookmarks as a backup file.</p>
            <button onclick="exportData()">Export Data to File</button>
            <button onclick="showData()">Show Data in Browser</button>
        </div>

        <div class="section">
            <h2>üì§ Import Data</h2>
            <p>Upload a previously exported backup file to restore your data.</p>
            <input type="file" id="importFile" accept=".json">
            <button onclick="importData()">Import from File</button>
        </div>

        <div class="section">
            <h2>üëÅÔ∏è View Current Data</h2>
            <button onclick="viewLodges()">View Lodges</button>
            <button onclick="viewBookmarks()">View Bookmarks</button>
            <textarea id="dataDisplay" placeholder="Data will appear here..."></textarea>
        </div>

        <div class="section">
            <h2>‚ö†Ô∏è Reset Data</h2>
            <p>This will clear all lodges and bookmarks and restore the default sample data.</p>
            <button class="danger" onclick="resetToDefaults()">Reset to Default Lodges</button>
        </div>

        <div class="success" id="successMsg"></div>
    </div>

    <script>
        function updateCounts() {
            const lodges = JSON.parse(localStorage.getItem('lodges') || '[]');
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            document.getElementById('lodgeCount').textContent = lodges.length;
            document.getElementById('bookmarkCount').textContent = bookmarks.length;
        }

        function showSuccess(message) {
            const msg = document.getElementById('successMsg');
            msg.textContent = message;
            msg.style.display = 'block';
            setTimeout(() => {
                msg.style.display = 'none';
            }, 3000);
        }

        function exportData() {
            const data = {
                lodges: JSON.parse(localStorage.getItem('lodges') || '[]'),
                bookmarks: JSON.parse(localStorage.getItem('bookmarks') || '[]'),
                exportDate: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `lodge-finder-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showSuccess('Data exported successfully!');
        }

        function showData() {
            const data = {
                lodges: JSON.parse(localStorage.getItem('lodges') || '[]'),
                bookmarks: JSON.parse(localStorage.getItem('bookmarks') || '[]')
            };
            document.getElementById('dataDisplay').value = JSON.stringify(data, null, 2);
        }

        function importData() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];

            if (!file) {
                alert('Please select a file first!');
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                try {
                    const data = JSON.parse(e.target.result);

                    if (data.lodges) {
                        localStorage.setItem('lodges', JSON.stringify(data.lodges));
                    }
                    if (data.bookmarks) {
                        localStorage.setItem('bookmarks', JSON.stringify(data.bookmarks));
                    }

                    updateCounts();
                    showSuccess('Data imported successfully!');
                    fileInput.value = '';
                } catch (error) {
                    alert('Error importing data: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function viewLodges() {
            const lodges = JSON.parse(localStorage.getItem('lodges') || '[]');
            document.getElementById('dataDisplay').value = JSON.stringify(lodges, null, 2);
        }

        function viewBookmarks() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            document.getElementById('dataDisplay').value = JSON.stringify(bookmarks, null, 2);
        }

        function resetToDefaults() {
            if (!confirm('This will delete all your current lodges and bookmarks. Are you sure?')) {
                return;
            }

            const defaultLodges = [
                {
                    id: 1,
                    name: "Alpine Sanctuary",
                    location: "Swiss Alps",
                    price: 450,
                    image: "images/background.png",
                    description: "Experience the pinnacle of luxury in the heart of the Swiss Alps. Alpine Sanctuary offers a secluded retreat where modern comfort meets traditional alpine charm.",
                    amenities: ["Private Spa", "Gourmet Dining", "Ski-in/Ski-out", "Concierge"],
                    gallery: [],
                    safety: 5,
                    email: "info@alpinesanctuary.com",
                    phone: "+41 12 345 6789",
                    lat: 46.603354,
                    lon: 7.96871
                },
                {
                    id: 2,
                    name: "Oceanfront Villa",
                    location: "Maldives",
                    price: 850,
                    image: "images/background.png",
                    description: "Wake up to the sound of waves in this overwater villa. Perfect for honeymooners and peace seekers.",
                    amenities: ["Infinity Pool", "Butler Service", "Water Sports", "Fine Dining"],
                    email: "reservations@oceanfront.com",
                    safety: 4.8,
                    phone: "+960 123 4567",
                    lat: 4.175496,
                    lon: 73.509347
                },
                {
                    id: 3,
                    name: "Forest Hideaway",
                    location: "Oregon, USA",
                    price: 250,
                    image: "images/background.png",
                    description: "A cozy cabin deep in the woods, perfect for disconnecting from the digital world.",
                    amenities: ["Fireplace", "Hiking Trails", "Pet Friendly", "Kitchen"],
                    email: "stay@foresthideaway.com",
                    safety: 4.5,
                    phone: "+1 555 0199"
                }
            ];

            localStorage.setItem('lodges', JSON.stringify(defaultLodges));
            localStorage.removeItem('bookmarks');
            updateCounts();
            showSuccess('Data reset to defaults!');
        }

        // Initialize on load
        updateCounts();
    </script>
</body>

</html>